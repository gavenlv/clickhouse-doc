{
  "timestamp": "2026-01-23T22:13:38.885664",
  "directory": "08-information-schema",
  "summary": {
    "total_files": 8,
    "total_statements": 190,
    "total_success": 190,
    "total_errors": 0
  },
  "results": {
    "08-information-schema\\01_databases_tables_examples.sql": [
      {
        "statement": "-- ================================================\n-- 01_databases_tables_examples.sql\n-- 从 01_databases_tables.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- =========================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 创建数据库\nCREATE DATABASE IF NOT EXISTS analytics\nENGINE = Atomic",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 带注释的数据库\nCREATE DATABASE IF NOT EXISTS analytics\nENGINE = Atomic\nCOMMENT 'Analytics database'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 创建后查看\nSELECT\n    name,\n    engine,\n    comment\nFROM system.databases\nWHERE name = 'analytics'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 删除数据库（Atomic 引擎支持延迟删除）\nDROP DATABASE IF EXISTS analytics",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看延迟删除的数据库\nSELECT\n    name,\n    engine,\n    drop_time\nFROM system.databases\nWHERE is_temporary OR drop_time IS NOT NULL",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看所有表\nSELECT\n    database,\n    name AS table,\n    engine,\n    engine_full,\n    partition_key,\n    so",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 统计各引擎的表数量\nSELECT\n    engine,\n    count() AS table_count,\n    sum(total_rows) AS total_rows,\n    form",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看占用空间最大的表\nSELECT\n    database,\n    table,\n    engine,\n    formatReadableSize(total_bytes) AS size,\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看表的分区和排序键信息\nSELECT\n    database,\n    name AS table,\n    engine,\n    partition_key,\n    sorting_key,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看所有视图和依赖的表\nSELECT\n    database,\n    name AS view_name,\n    dependencies_table AS depends_on\nFROM sy",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看每个数据库的表分布\nSELECT\n    database,\n    count() AS table_count,\n    countIf(engine = 'MergeTree') AS me",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 数据库级别的统计\nSELECT\n    database,\n    count() AS table_count,\n    sum(total_rows) AS total_rows,\n    for",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 表大小分布统计\nSELECT\n    CASE\n        WHEN total_bytes < 1024 * 1024 THEN 'Small (<1MB)'\n        WHEN tota",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找长时间未访问的表\nSELECT\n    t.database,\n    t.table,\n    t.engine,\n    t.total_rows,\n    formatReadableSiz",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找空表\nSELECT\n    database,\n    name AS table,\n    engine,\n    create_table_query\nFROM system.tables\nW",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找临时表\nSELECT\n    name,\n    engine,\n    total_rows,\n    formatReadableSize(total_bytes) AS size\nFROM ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找没有分区的 MergeTree 系列表\nSELECT\n    database,\n    name AS table,\n    engine,\n    total_rows,\n    format",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找分布式表和对应的本地表\nSELECT\n    t1.database,\n    t1.name AS distributed_table,\n    t1.total_rows AS dist_ro",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 生成删除空表的 SQL（谨慎使用！）\nSELECT \n    concat('DROP TABLE IF EXISTS ', database, '.', name, ';') AS drop_sql",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 生成表的完整定义\nSELECT\n    create_table_query\nFROM system.tables\nWHERE database = 'your_database'\n  AND nam",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\02_columns_schema_examples.sql": [
      {
        "statement": "-- ================================================\n-- 02_columns_schema_examples.sql\n-- 从 02_columns_schema.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- =============================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看表的完整结构（包括默认值、压缩等）\nSELECT\n    database,\n    table,\n    name AS column_name,\n    position,\n    type,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 按数据类型统计列的数量\nSELECT\n    type,\n    count() AS column_count,\n    countIf(database = 'your_database') AS",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找所有 Nullable 类型的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    default_ki",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找 LowCardinality 列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    default_k",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找 Array, Map, Tuple 等复杂类型列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    p",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 分析列的压缩率\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    data_uncompressed_byt",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找占用空间最大的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    formatReadableSize",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 分析 String 类型列的大小\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    formatReadab",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看所有有默认值的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    default_kind,\n    ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 统计默认值类型\nSELECT\n    default_kind,\n    count() AS column_count\nFROM system.columns\nWHERE default_kind ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 生成表的 CREATE TABLE 语句\nSELECT \n    concat(\n        'CREATE TABLE ', database, '.', table, ' (\\n',\n    ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找可能有重复列名的表（考虑大小写）\nSELECT\n    database,\n    table,\n    name,\n    count() AS duplicate_count\nFROM sys",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找重要表中没有注释的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    position\nFROM sy",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 建议将 String 类型改为 LowCardinality 的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找占用空间过大且压缩率低的列\nSELECT\n    database,\n    table,\n    name AS column_name,\n    type,\n    formatReadabl",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 比较表 A 和表 B 的结构差异\nSELECT\n    'Only in table_a' AS difference_type,\n    name AS column_name,\n    type,",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\03_partitions_parts_examples.sql": [
      {
        "statement": "-- ================================================\n-- 03_partitions_parts_examples.sql\n-- 从 03_partitions_parts.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- =========================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看表的活动分区（不包括合并中的部分）\nSELECT\n    partition,\n    sum(rows) AS total_rows,\n    formatReadableSize(sum(by",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看表的分区概览\nSELECT\n    partition,\n    sum(rows) AS total_rows,\n    formatReadableSize(sum(bytes_on_disk",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 删除指定分区（谨慎操作！）\nALTER TABLE your_database.your_table\nDROP PARTITION '2023-01'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看被删除的分区（非活动块）\nSELECT\n    partition,\n    name AS part_name,\n    rows,\n    bytes_on_disk,\n    remove_time\nFROM system.parts\nWHERE database = 'your_database'\n  AND table = 'your_table'\n  AND active =",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看分区大小分布\nSELECT\n    partition,\n    formatReadableSize(sum(bytes_on_disk)) AS size,\n    formatReadabl",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 检查数据块的碎片化程度\nSELECT\n    database,\n    table,\n    partition,\n    count() AS part_count,\n    avg(rows) ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看数据块的合并层级分布\nSELECT\n    database,\n    table,\n    partition,\n    level,\n    count() AS part_count,\n  ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看等待合并的数据块\nSELECT\n    database,\n    table,\n    partition,\n    name AS part_name,\n    rows,\n    bytes",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 按月统计分区（假设分区键是日期）\nSELECT\n    toYYYYMM(toDate(partition)) AS month,\n    count() AS partition_count,\n  ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 分析分区的写入时间\nSELECT\n    partition,\n    min(modification_time) AS first_write,\n    max(modification_time",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 识别碎片化严重的分区（建议运行 OPTIMIZE）\nSELECT\n    database,\n    table,\n    partition,\n    count() AS part_count,\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查找可以清理的旧分区\nSELECT\n    database,\n    table,\n    partition,\n    formatReadableSize(sum(bytes_on_disk))",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 按月分析数据增长\nSELECT\n    toStartOfMonth(modification_time) AS month,\n    count() AS parts_created,\n    su",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 检查重复的分区（异常情况）\nSELECT\n    database,\n    table,\n    partition,\n    count() AS duplicate_parts\nFROM sys",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看数据块大小分布\nSELECT\n    CASE\n        WHEN bytes_on_disk < 1024 * 1024 THEN 'Small (<1MB)'\n        WHEN ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 强制合并指定分区\nOPTIMIZE TABLE your_database.your_table\nPARTITION '2023-01'\nFINAL",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看合并进度\nSELECT\n    database,\n    table,\n    partition,\n    count() AS part_count_before,\n    sum(rows) AS total_rows\nFROM system.parts\nWHERE database = 'your_database'\n  AND table = 'your_table'\n  A",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看非活动数据块占用空间\nSELECT\n    database,\n    table,\n    count() AS inactive_parts,\n    formatReadableSize(s",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 基本查询\n-- ========================================\n\n-- 查看正在进行的合并任务\nSELECT\n    database,\n    table,\n    partition,\n    type,\n    table_version,\n    mutation",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\04_indexes_projections_examples.sql": [
      {
        "statement": "-- ================================================\n-- 04_indexes_projections_examples.sql\n-- 从 04_indexes_projections.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- ===================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查看特定表的所有索引\nSELECT\n    name AS index_name,\n    type,\n    expr,\n    granularity,\n    column_names,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 统计不同索引类型的使用情况\nSELECT\n    type,\n    count() AS index_count,\n    arrayDistinct(arrayFlatten(groupA",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查看索引的实际使用情况（需要查询日志）\nSELECT\n    index_name,\n    type,\n    expr,\n    granularity,\n    count() AS u",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查找可能未使用的索引\nSELECT\n    database,\n    table,\n    name AS index_name,\n    type,\n    expr,\n    granu",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查看所有表的投影\nSELECT\n    database,\n    table,\n    name AS projection_name,\n    type,\n    formatReadab",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查看特定表的投影\nSELECT\n    name AS projection_name,\n    type,\n    target_name,\n    formatReadableSize(t",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查看投影的数据块\nSELECT\n    database,\n    table,\n    projection,\n    partition,\n    name AS part_name,\n ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 分析投影占用的空间\nSELECT\n    database,\n    table,\n    projection,\n    formatReadableSize(sum(bytes_on_di",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 为表创建 minmax 索引\nALTER TABLE your_database.your_table\nADD INDEX idx_event_time_minmax event_time T",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 为表创建 set 索引\nALTER TABLE your_database.your_table\nADD INDEX idx_status_set status TYPE set(0) GRANULARITY 1",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 为表创建布隆过滤器索引\nALTER TABLE your_database.your_table\nADD INDEX idx_user_id_bloom user_id TYPE bloom_filter(0.01) GRANULARITY 1",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看新创建的索引\nSELECT\n    name,\n    type,\n    expr,\n    granularity,\n    column_names\nFROM system.data_skipping_indices\nWHERE database = 'your_database'\n  AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 删除索引\nALTER TABLE your_database.your_table\nDROP INDEX idx_event_time_minmax",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 验证索引已删除\nSELECT\n    name,\n    type,\n    expr,\n    granularity\nFROM system.data_skipping_indices\nWHERE database = 'your_database'\n  AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 创建投影用于加速聚合查询\nALTER TABLE your_database.your_table\nADD PROJECTION projection_daily_summary\n(\n    ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看创建的投影\nSELECT\n    name,\n    type,\n    create_time\nFROM system.projections\nWHERE database = 'your_database'\n  AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 分析查询是否使用了索引\nSELECT\n    query,\n    read_rows,\n    read_bytes,\n    result_rows,\n    result_bytes,\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 强制重建索引\nALTER TABLE your_database.your_table\nMATERIALIZE INDEX idx_event_time_minmax IN PARTITION",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看索引状态\nSELECT\n    name,\n    type,\n    status,\n    message\nFROM system.dropped_indices\nWHERE database = 'your_database'\n  AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查找适合创建索引的列（高频 WHERE 条件）\nSELECT\n    query_database,\n    query_table,\n    extractAll(query, 'WHERE",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有跳数索引\n-- ========================================\n\n-- 查找可能重复的索引（相同的表达式）\nSELECT\n    database,\n    table,\n    groupArray(name) AS index_names,\n    expr,",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\05_clusters_replicas_examples.sql": [
      {
        "statement": "-- ================================================\n-- 05_clusters_replicas_examples.sql\n-- 从 05_clusters_replicas.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- =======================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看 treasurycluster 集群详情\nSELECT\n    cluster,\n    shard_num,\n    replica_num,\n    host_name,\n    por",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看所有复制表的副本状态\nSELECT\n    database,\n    table,\n    replica_name,\n    is_leader,\n    is_readonly,\n   ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看有复制延迟的副本\nSELECT\n    database,\n    table,\n    replica_name,\n    absolute_delay,\n    relative_dela",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看复制队列中的任务\nSELECT\n    database,\n    table,\n    replica_name,\n    position,\n    node_name,\n    type",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看有异常的复制任务\nSELECT\n    database,\n    table,\n    replica_name,\n    type,\n    event_type,\n    excepti",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 集群健康检查\nSELECT\n    'Cluster Health' AS check_type,\n    count() AS total_nodes,\n    sumIf(1, errors_",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 副本状态检查\nSELECT\n    'Replica Status' AS check_type,\n    count() AS total_replicas,\n    sumIf(1, is_l",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 检查副本数据一致性\nSELECT\n    database,\n    table,\n    active_replicas,\n    total_replicas,\n    (total_repl",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看所有分布式表\nSELECT\n    database,\n    name AS table,\n    cluster,\n    sharding_key,\n    distributed_ta",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看分布式表对应的本地表\nSELECT\n    dt.database,\n    dt.name AS distributed_table,\n    dt.cluster,\n    dt.shar",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 实时监控复制延迟\nSELECT\n    database,\n    table,\n    replica_name,\n    absolute_delay,\n    relative_delay,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查找只读副本\nSELECT\n    database,\n    table,\n    replica_name,\n    is_leader,\n    is_readonly,\n    is_se",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 分析集群各节点的负载\nSELECT\n    cluster,\n    shard_num,\n    replica_num,\n    host_name,\n    errors_count,\n  ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 检查表的副本数量\nSELECT\n    database,\n    table,\n    active_replicas,\n    total_replicas,\n    (total_repli",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查找积压严重的复制队列\nSELECT\n    database,\n    table,\n    replica_name,\n    queue_size,\n    absolute_delay,\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 手动触发复制任务（通常不需要手动操作）\nSYSTEM SYNC REPLICA your_database.your_table",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看复制状态\nSELECT\n    replica_name,\n    queue_size,\n    absolute_delay,\n    last_queue_update\nFROM system.replicas\nWHERE database = 'your_database'\n  AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 删除并重新创建副本（谨慎操作！）\n-- 1. 先查看副本状态\nSELECT * FROM system.replicas\nWHERE database = 'your_database' AND ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 2. 在需要重新同步的节点上删除表\n-- DROP TABLE IF EXISTS your_database.your_table SYNC",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 3. 重新创建表（使用原表的 CREATE TABLE 语句）\n-- CREATE TABLE your_database.your_table ...",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 4. 验证复制状态\nSELECT * FROM system.replicas\nWHERE database = 'your_database' AND table = 'your_table'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 查看当前集群配置\nSELECT * FROM system.clusters\nWHERE cluster = 'treasurycluster'\nORDER BY shard_num, repli",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 添加新节点需要：\n-- 1. 在新节点上安装 ClickHouse\n-- 2. 配置 ClickHouse Keeper\n-- 3. 更新集群配置文件\n-- 4. 重启 ClickHouse 服务\n-- 5. 验证新节点加入集群\nSELECT * FROM system.clusters\nWHERE cluster = 'treasurycluster'\nORDER BY shard_num",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 复制状态概览\nSELECT\n    'Total Replicas' as metric,\n    count() as value,\n    '' as status\nFROM system.r",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看集群配置\n-- ========================================\n\n-- 集群节点状态\nSELECT\n    cluster,\n    shard_num,\n    replica_num,\n    host_name,\n    port,\n    errors_cou",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\06_users_roles_examples.sql": [
      {
        "statement": "-- ================================================\n-- 06_users_roles_examples.sql\n-- 从 06_users_roles.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- ================================================\n\n\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看特定用户的详细权限\nSELECT\n    name,\n    auth_type,\n    profile,\n    quota,\n    default_database,\n    gran",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看角色的权限详情\nSELECT\n    name,\n    is_default,\n    grants\nFROM system.roles\nWHERE name = 'your_role'\\G",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 统计各数据库的权限分配\nSELECT\n    database,\n    count() AS total_grants,\n    countIf(user_name != '') AS dire",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看所有配置文件\nSELECT\n    name,\n    is_default,\n    settings,\n    readonly,\n    use_own_settings\nFROM sy",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看特定配置文件的设置\nSELECT\n    name,\n    is_default,\n    settings,\n    readonly\nFROM system.settings_profi",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看配额使用情况\nSELECT\n    quota_name,\n    quota_key,\n    duration,\n    query_number,\n    query_number_wi",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看当前活跃会话\nSELECT\n    user,\n    client_hostname,\n    client_name,\n    client_version,\n    connect_ti",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 按用户统计会话\nSELECT\n    user,\n    count() AS session_count,\n    countIf(query != '') AS active_queries,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 创建新用户\nCREATE USER IF NOT EXISTS new_user\nIDENTIFIED WITH sha256_password BY 'your_password'\nDEFAUL",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看创建的用户\nSELECT\n    name,\n    auth_type,\n    profile,\n    quota,\n    default_database\nFROM system.users\nWHERE name = 'new_user'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 创建新角色\nCREATE ROLE IF NOT EXISTS new_role",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 授予角色权限\nGRANT SELECT, INSERT ON your_database.* TO new_role",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看角色权限\nSELECT\n    name,\n    grants\nFROM system.roles\nWHERE name = 'new_role'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 授予用户角色\nGRANT new_role TO your_user",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 直接授予用户权限\nGRANT SELECT ON your_database.your_table TO your_user",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 验证权限\nSELECT\n    grant_type,\n    database,\n    table,\n    access_type\nFROM system.grants\nWHERE user_name = 'your_user'\n  AND database = 'your_database'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 撤销用户角色\nREVOKE new_role FROM your_user",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 撤销用户权限\nREVOKE SELECT ON your_database.your_table FROM your_user",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 验证权限撤销\nSELECT\n    grant_type,\n    database,\n    table,\n    access_type\nFROM system.grants\nWHERE user_name = 'your_user'\n  AND database = 'your_database'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 删除用户\nDROP USER IF EXISTS your_user",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 删除角色\nDROP ROLE IF EXISTS your_role",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 验证删除\nSELECT\n    name\nFROM system.users\nWHERE name = 'your_user'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "SELECT\n    name\nFROM system.roles\nWHERE name = 'your_role'",
        "success": true,
        "result": ""
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看权限相关操作日志\nSELECT\n    event_time,\n    event_date,\n    user,\n    query,\n    query_kind,\n    excepti",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查看用户活动统计\nSELECT\n    user,\n    count() AS query_count,\n    sum(read_rows) AS total_read_rows,\n    s",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 检查是否有使用默认密码的用户\nSELECT\n    name,\n    auth_type\nFROM system.users\nWHERE auth_type = 'no_password'\nOR",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 检查拥有过多权限的用户\nSELECT\n    user_name,\n    count() AS grant_count,\n    countIf(access_type = 'ALL') AS ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看所有用户\n-- ========================================\n\n-- 查找长时间未使用的用户\nSELECT\n    name,\n    profile,\n    quota,\n    last_activity_time\nFROM system.users\nLEFT",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\07_queries_processes_examples.sql": [
      {
        "statement": "-- ================================================\n-- 07_queries_processes_examples.sql\n-- 从 07_queries_processes.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- =======================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看查询的详细进度\nSELECT\n    query_id,\n    user,\n    query,\n    elapsed,\n    elapsed / max_execution_ti",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看最近完成的查询\nSELECT\n    event_time,\n    event_date,\n    query_id,\n    user,\n    query,\n    query_k",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看执行时间超过 10 秒的查询\nSELECT\n    event_time,\n    user,\n    query,\n    elapsed,\n    read_rows,\n    re",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 统计不同类型查询的数量\nSELECT\n    type,\n    query_kind,\n    count() AS query_count,\n    avg(elapsed) AS av",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看最慢的查询\nSELECT\n    event_time,\n    user,\n    query,\n    elapsed,\n    read_rows,\n    read_bytes,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 分析资源使用最多的查询\nSELECT\n    user,\n    query,\n    elapsed,\n    read_bytes,\n    result_bytes,\n    memo",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 统计最常执行的查询\nSELECT\n    query,\n    count() AS execution_count,\n    avg(elapsed) AS avg_elapsed,\n  ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查找运行时间超过阈值的查询\nSELECT\n    query_id,\n    user,\n    query,\n    elapsed,\n    read_rows,\n    read_by",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 终止特定查询（谨慎使用！）\nKILL QUERY WHERE query_id = 'query_id_here'",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 查看终止的查询\nSELECT\n    event_time,\n    user,\n    query,\n    elapsed,\n    exception_code,\n    exception_text\nFROM system.query_log\nWHERE type = 'ExceptionWhileProcessing'\n  AND event_date >= today()\n  A",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看失败的查询\nSELECT\n    event_time,\n    user,\n    query,\n    exception_code,\n    exception_text,\n   ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 分析用户的查询行为\nSELECT\n    user,\n    count() AS total_queries,\n    sumIf(1, elapsed > 10) AS slow_que",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查找查询模式（使用正则表达式）\nSELECT\n    extractGroups(query, 'SELECT .* FROM ([^ ]+)')[1] AS table_accessed,",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 查看查询线程日志\nSELECT\n    event_time,\n    query_id,\n    thread_id,\n    thread_name,\n    elapsed,\n    ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 分析查询的线程使用情况\nSELECT\n    query_id,\n    thread_id,\n    count() AS thread_count,\n    avg(elapsed) A",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 实时查询监控仪表盘\nSELECT\n    'Running Queries' as metric,\n    count() as value\nFROM system.processes\n\nU",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 今日查询统计\nSELECT\n    'Total Queries' as metric,\n    count() as value\nFROM system.query_log\nWHERE t",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- 查看当前运行的查询\n-- ========================================\n\n-- 按小时统计资源使用\nSELECT\n    toHour(event_time) AS hour,\n    count() AS query_count,\n    avg(elapsed) A",
        "success": true,
        "result": "Comment - skipped"
      }
    ],
    "08-information-schema\\08_system_tables_examples.sql": [
      {
        "statement": "-- ================================================\n-- 08_system_tables_examples.sql\n-- 从 08_system_tables.md 提取的 SQL 示例\n-- 提取时间: 2026-01-23 14:40:17\n-- ===============================================",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看所有表\nSELECT database, name, engine, total_rows, total_bytes\nFROM system.tables\nWHERE da",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看列定义\nSELECT database, table, name, type, position\nFROM system.columns\nWHERE database = ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看所有函数\nSELECT name, alias, is_aggregate, is_nullable\nFROM system.functions\nWHERE name LI",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看数据块\nSELECT database, table, partition, name, rows, bytes_on_disk, level\nFROM system.pa",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看数据块的列统计\nSELECT database, table, partition, column, sum(rows) AS total_rows\nFROM system",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看分离的数据块\nSELECT database, table, partition, name, bytes_on_disk\nFROM system.detached_par",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看副本状态\nSELECT database, table, is_leader, queue_size, absolute_delay\nFROM system.replica",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看复制队列\nSELECT database, table, replica_name, position, type\nFROM system.replication_queu",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看 ZooKeeper 连接状态\n-- 注意：system.zookeeper 在某些配置中可能不可用或返回 400 错误\n-- 替代方案：使用 system.replica",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看运行中的查询\nSELECT query_id, user, query, elapsed, read_rows, memory_usage\nFROM system.proc",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看查询日志\nSELECT event_time, user, query, type, elapsed\nFROM system.query_log\nWHERE type = ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看查询线程日志\nSELECT event_time, query_id, thread_id, cpu_time_ns, memory_usage\nFROM system.q",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看活跃会话\nSELECT user, client_hostname, connect_time, query_start_time, query\nFROM system.s",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看指标快照\nSELECT metric, value, description\nFROM system.metrics\nWHERE metric LIKE '%ClickHo",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看事件计数器\nSELECT event, value, description\nFROM system.events\nWHERE event LIKE 'Read%'\nORD",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看异步指标\nSELECT metric, value, description\nFROM system.asynchronous_metrics\nORDER BY metri",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看性能配置文件\nSELECT name, settings, readonly\nFROM system.profiles\nORDER BY name",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看磁盘配置\nSELECT name, path, free_space, total_space, keep_free_space_bytes\nFROM system.dis",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看跳数索引\nSELECT database, table, name, type, expr, granularity\nFROM system.data_skipping_i",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看投影数据块\nSELECT database, table, projection, partition, rows, bytes_on_disk\nFROM system.p",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看所有用户\nSELECT name, auth_type, profile, quota\nFROM system.users\nORDER BY name",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看所有角色\nSELECT name, is_default, grants\nFROM system.roles\nORDER BY name",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看权限授予情况\nSELECT user_name, role_name, grant_type, database, table, access_type\nFROM syst",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看行级策略\nSELECT database, table, name, filter\nFROM system.row_policies\nWHERE database != '",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看配额设置\nSELECT name, keys, durations\nFROM system.quotas\nORDER BY name",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看配置文件\nSELECT name, is_default, settings, readonly\nFROM system.settings_profiles\nORDER B",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查看变更操作\nSELECT database, table, command_type, command, is_done\nFROM system.mutations\nWHER",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 一键数据库巡检\nSELECT\n    'Databases' as category,\n    count() as count,\n    '' as status\nFROM ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 存储空间分析\nSELECT\n    database,\n    table,\n    formatReadableSize(sum(bytes_on_disk)) AS siz",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 查询性能分析\nSELECT\n    user,\n    count() AS query_count,\n    avg(elapsed) AS avg_elapsed,\n   ",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 副本健康检查\nSELECT\n    database,\n    table,\n    replica_name,\n    is_leader,\n    queue_size,\n",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 资源使用监控\nSELECT\n    metric,\n    value,\n    description\nFROM system.metrics\nWHERE metric IN",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 创建物化视图来聚合查询日志\nCREATE MATERIALIZED VIEW IF NOT EXISTS query_stats_mv\nENGINE = SummingMerg",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- ========================================\n-- system.databases\n-- ========================================\n\n-- 清理旧的查询日志\nALTER TABLE system.query_log\nDELETE WHERE event_date < today() - INTERVAL 30 DA",
        "success": true,
        "result": "Comment - skipped"
      },
      {
        "statement": "-- 清理旧的查询线程日志\nALTER TABLE system.query_thread_log\nDELETE WHERE event_date < today() - INTERVAL 30 DAY",
        "success": true,
        "result": "Comment - skipped"
      }
    ]
  }
}